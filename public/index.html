<!DOCTYPE html>
<html lang="en">
<head>
<link rel="shortcut icon" href="favicon.ico" />
 <title>MeltTech</title>
 <meta name="viewport" content="width=device-width, initial-scale=0.70">

 <script src="assets/js/jquery-1.10.2.min.js"></script>
 <script src="assets/js/jquery.event.drag-2.2.js"></script>
 <script src="assets/js/jquery.flot.js"></script>
 <script src="assets/js/jquery.flot.resize.js"></script>
 <script src="assets/js/jquery.flot.draggable.js"></script>
 <script src="assets/js/bootstrap.min.js"></script>
 <script src="assets/js/jquery.bootstrap-growl.min.js"></script>
 <script src="assets/js/select2.min.js"></script>
 <script src="assets/js/picoreflow.js"></script>

 <link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
 <link rel="stylesheet" href="assets/css/bootstrap-theme.min.css"/>
 <link rel="stylesheet" href="assets/css/bootstrap-modal.css"/>
 <link rel="stylesheet" href="assets/css/select2.css"/>
 <link rel="stylesheet" href="assets/css/picoreflow.css"/>

</head>
<body>



 <div class="container">
  <div id="status">
   <div class="ds-title-panel">
    <div class="ds-title">Sensor Temp</div>
    <div class="ds-title">Target Temp</div>
    <div class="ds-title">Cost</div>
    <div class="ds-title ds-state pull-right" style="border-left: 1px solid #ccc;">&nbsp;Heating&nbsp;&nbsp;&nbsp;Running&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Idle&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hazard&nbsp;&nbsp;&nbsp;&nbsp;Sched&nbsp;&nbsp;&nbsp;</div>
   </div>
   <div class="clearfix"></div>
   <div class="ds-panel">
    <div class="display ds-num"><span id="act_temp">---</span><span class="ds-unit" id="act_temp_scale" >&deg;C</span></div>
    <div class="display ds-num ds-target"><span id="target_temp">---</span><span class="ds-unit" id="target_temp_scale">&deg;C</span></div>
    <div class="display ds-num ds-cost"><span id="cost">0.00</span><span class="ds-unit" id="cost"></span></div>
    <div class="display ds-num ds-text" id="state"></div>
    <div class="display pull-right ds-state" style="padding-right:0"><span class="ds-led" id="heat">&#9832;&#xfe0e;</span><span class="ds-led" id="running">&#9728;&#xfe0e;</span><span class="ds-led" id="idle">&#9728;&#xfe0e;</span><span class="ds-led" id="hazard">&#73;&#xfe0e;</span><span class="ds-led" id="timer">&#x29D6;&#xfe0e;</span></div>
   </div>
   <div class="clearfix"></div>
   <div>
    <div class="progress progress-striped active">
     <div id="progressBar" class="progress-bar"  role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
      <span class="sr-only"></span>
     </div>
    </div>
   </div>
  </div>
  <div class="panel panel-default">
   <div class="panel-heading">
     <div id="profile_selector" class="pull-left">
      <select id="e2" class="select2" style="margin-top: 4px"></select>
      <button id="btn_edit" type="button" class="btn btn-default" onclick="enterEditMode()"><span class="glyphicon glyphicon-edit"></span></button>
      <button id="btn_new" type="button" class="btn btn-default" onclick="enterNewMode(selected_profile)"><span class="glyphicon glyphicon-plus"></span></button>
<!-- Cone Mode Button -->
      <button id="cone-mode-button">Activate Cone Mode</button>

<!-- Cone Number Dropdown -->
      <label for="cone-number-select">Select Target Cone:</label>
<select id="cone-number-select">
  <option value="12">Cone 12</option>
  <option value="11">Cone 11</option>
  <option value="10">Cone 10</option>
  <option value="9">Cone 9</option>
  <option value="8">Cone 8</option>
  <option value="7">Cone 7</option>
  <option value="6">Cone 6</option>
  <option value="5">Cone 5</option>
  <option value="4">Cone 4</option>
  <option value="3">Cone 3</option>
  <option value="2">Cone 2</option>
  <option value="1">Cone 1</option>
  <option value="01">Cone 01</option>
  <option value="02">Cone 02</option>
  <option value="03">Cone 03</option>
  <option value="04">Cone 04</option>
  <option value="05">Cone 05</option>
  <option value="06">Cone 06</option>
  <option value="07">Cone 07</option>
  <option value="08">Cone 08</option>
  <option value="09">Cone 09</option>
  <option value="010">Cone 010</option>
  <option value="011">Cone 011</option>
  <option value="012">Cone 012</option>
  <option value="013">Cone 013</option>
  <option value="014">Cone 014</option>
  <option value="015">Cone 015</option>
  <option value="016">Cone 016</option>
  <option value="017">Cone 017</option>
  <option value="018">Cone 018</option>
  <option value="019">Cone 019</option>
  <option value="020">Cone 020</option>
  <option value="021">Cone 021</option>
  <option value="022">Cone 022</option>

  <!-- Add more cone options as needed -->
</select>

     </div>
   <div id="btn_controls" class="pull-right" style="margin-top: 3px">
    <div id="nav_start" class="btn-group" style="display:none">
     <button type="button" class="btn btn-default" style="visibility: hidden;"  onclick="runTaskSimulation();">Simulate</button>
    </div>
     <button type="button" class="btn btn-success" data-toggle="modal" data-target="#jobSummaryModal"><span class="glyphicon glyphicon-play"></span>START-STOP</button>
   </div>
    <div id="edit" style="display:none;">
     <div class="input-group">
      <span class="input-group-addon">Schedule Name</span>
      <input id="form_profile_name" type="text" class="form-control" />
      <span class="input-group-btn">
        <button id="allow_save_button" class="btn btn-success" type="button" onclick="saveProfile();">Save</button>
        <button id="btn_exit" type="button" class="btn btn-primary" onclick="leaveEditMode()">Back <span class="glyphicon glyphicon-remove"></span></button>
      </span>
     </div>
     <div class="btn-group btn-group-sm" style="margin-top: 10px">
      <button id="btn_newPoint" type="button" class="btn btn-default" onclick="newPoint()"><span class="glyphicon glyphicon-plus"></span></button>
     </div>
     <div class="btn-group btn-group-sm" style="margin-top: 10px">
      <button id="btn_delPoint" type="button" class="btn btn-default" onclick="delPoint()"><span class="glyphicon glyphicon-minus"></span></button>
     </div>
     <div class="btn-group btn-group-sm" style="margin-top: 10px">
      <button id="btn_table" type="button" class="btn btn-primary" onclick="toggleTable()"><span class="glyphicon glyphicon-list"></span></button>
     </div>
     <div class="btn-group btn-group-sm" style="margin-top: 10px">
      <button id="btn_delProfile" type="button" class="btn btn-danger" data-toggle="modal" data-target="#delProfileModal"><span class="glyphicon glyphicon-trash"></span></button>
     </div>
    </div>
   </div>
   <p align="center"><a href="http://melttech.com.au/Install.html" target="_blank"><img src="help_button.PNG" alt="MeltTech Install" width="100" height="20"></a><a href="http://melttech.com.au/Install.html" target="_blank"><img src="Firing Profiles.PNG" alt="Kiln Firing Profiles" width="100" height="20"></a><a href="https://www.youtube.com/results?search_query=ceramics+kiln+firing" target="_blank"><img src="ceramics.PNG" alt="Ceramics" width="100" height="20"></a><a href="https://www.youtube.com/results?search_query=Glass+kiln+firing" target="_blank"><img src="Glass.PNG" width="100" height="20"></a><a href="https://www.youtube.com/results?search_query=Heat+Treatment" target="_blank"><img src="Heat Treatment.PNG" alt="Heat Treatment" width="100" height="20"></a><a href="https://www.youtube.com/results?search_query=jewelry+casting" target="_blank"><img src="Jewelery.PNG" alt="Jewelery" width="100" height="20"></a><a href="https://www.youtube.com/results?search_query=precious+metal+clay" target="_blank"><img src="PMC.PNG" alt="PMC" width="100" height="20"></a></p>

   <div class="panel-body">
    <div id="graph_container" class="graph"></div>
   </div>
   <div id="profile_table" class="panel-footer" style="display:none;"></div>
  </div>
 </div>

 <div id="jobSummaryModal" class="modal fade" tabindex="-1" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
   <div class="modal-content">
    <div class="modal-header">
     <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
     <h3 class="modal-title" id="jobSummaryModalLabel">Task Overview</h3>
    </div>
    <div class="modal-body">
     <table class="table table-bordered">
      <tr><td>Selected Profile</td><td><b><span id="sel_prof"></span></b></td></tr>
      <tr><td>Estimated Runtime</td><td><b><span id="sel_prof_eta"></span></b></td></tr>
      <tr><td>More options soon</td><td><b><span id="sel_prof_cost"></span></b></td></tr>
     </table>
    </div>
    <div class="modal-footer">
     <div class="btn-group" style="width: 100%">
      <button type="button" class="btn btn-danger" style="width: 50%" data-dismiss="modal">No, take me back</button>
      <button type="button" class="btn btn-success" style="width: 50%" data-dismiss="modal" onClick="runTask()">Start new Run</button>
      <button type="button" class="btn btn-danger" style="width: 50%" data-dismiss="modal" onClick="abortTask()">Emergeny Stop</button>
      <button type="button" class="btn btn-success" style="width: 50%" data-dismiss="modal" onClick="runTaskResume()">Resume Run N/A</button>
      <button type="button" class="btn btn-danger" style="width: 50%" data-dismiss="modal" onClick="abortTask()">Emergeny Stop</button>
      <button type="button" class="btn btn-success" style="width: 50%" data-dismiss="modal" onClick="runTuning()">Bung Control N/A</button>      
      </div>
     <div class="schedule-group">
       <input type="datetime-local" id="scheduled-run-time">
       <button type="button" class="btn btn-primary" style="width: 50%" data-dismiss="modal" onclick="scheduleTask()">Schedule start for later</button>
     </div>
    </div>
   </div>
  </div>
 </div>

 <div id="delProfileModal" class="modal fade" tabindex="-1" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
   <div class="modal-content">
    <div class="modal-header">
     <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
     <h3 class="modal-title" id="delProfileModalLabel">Delete this profile?</h3>
    </div>
    <div class="modal-body">
     Do your really want to delete this profile?
    </div>
    <div class="modal-footer">
     <div class="btn-group" style="width: 100%">
      <button type="button" class="btn btn-danger" style="width: 50%" data-dismiss="modal">No, take me back</button>
      <button type="button" class="btn btn-success" style="width: 50%" data-dismiss="modal" onclick="deleteProfile()">Yes, delete the profile</button>
     </div>
    </div>
   </div>
  </div>
 </div>

 <div id="overwriteProfileModal" class="modal fade" tabindex="-1" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
   <div class="modal-content">
    <div class="modal-header">
     <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
     <h3 class="modal-title" id="overwriteProfileModalLabel">Overwrite this profile?</h3>
    </div>
    <div class="modal-body">
     Do your really want to overwrite this profile?
    </div>
    <div class="modal-footer">
     <div class="btn-group" style="width: 100%">
      <button type="button" class="btn btn-danger" style="width: 50%" data-dismiss="modal">No, take me back</button>
      <button type="button" class="btn btn-success" style="width: 50%" data-dismiss="modal" onclick="deleteProfile()">Yes, delete the profile</button>
     </div>
    </div>
   </div>
  </div>
 </div>

<script>
includeHTML();
</script>
<!DOCTYPE html>
<html lang="en">
<head>
<!-- Your other head elements here -->
</head>
<body>
<!-- Your HTML content here -->
<div id="coneLight" class="light-off"></div>
<button id="cone-mode-button">Activate Cone Mode</button>
<label for="cone-number-select">Select Target Cone:</label>
<select id="cone-number-select">
  <option value="10">Cone 10</option>
  <option value="9">Cone 9</option>
  <!-- Add more cone options as needed -->
</select>
<!DOCTYPE html>
<html>
<head>
    <!-- Add your other head elements here -->
    <style>
        /* Define the styles for the light */
        .light {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: red; /* Red indicates Cone Mode is not activated */
            display: inline-block;
            margin-left: 10px; /* Adjust the margin as needed */
        }

        .active {
            background-color: green; /* Green indicates Cone Mode is activated */
        }
    </style>
</head>
<body>
    <!-- Your existing HTML content -->

    <button id="cone-button" onclick="toggleConeMode()">Cone Mode</button>
    <span class="light" id="cone-light"></span> <!-- Add this light element -->

<!-- Cone Mode Controls -->
<div>
    <label for="coneNumberSelect">Select Cone Number:</label>
    <select id="coneNumberSelect">
        <option value="1">Cone 1</option>
        <option value="2">Cone 2</option>
        <option value="3">Cone 3</option>
        <!-- Add more options as needed -->
    </select>
    <button id="setConeButton">Set Cone</button>
</div>

</body>
</html>



<!-- Cone Mode Controls -->
<div>
    <label for="coneNumberSelect">Select Cone Number:</label>
    <select id="coneNumberSelect">
        <option value="1">Cone 1</option>
        <option value="2">Cone 2</option>
        <option value="3">Cone 3</option>
        <!-- Add more options as needed -->
    </select>
    <button id="setConeButton">Set Cone</button>
</div>

</body>
</html>
<!-- Your other script elements here -->

<!-- Cone Mode Controls -->
<div>
    <label for="coneNumberSelect">Select Cone Number:</label>
    <select id="coneNumberSelect">
        <option value="1">Cone 1</option>
        <option value="2">Cone 2</option>
        <option value="3">Cone 3</option>
        <!-- Add more options as needed -->
    </select>
    <button id="setConeButton">Set Cone</button>
</div>

</body>
</html>
<script>
    function toggleConeMode() {
        let coneLight = document.getElementById('cone-light');
        let isActivated = coneLight.classList.contains('active');

        if (isActivated) {
            // Deactivate Cone Mode
            coneLight.classList.remove('active');
        } else {
            // Activate Cone Mode
            coneLight.classList.add('active');
        }

        // You can also send a POST request to your Flask server here to activate/deactivate Cone Mode.
    }
</script>
<!DOCTYPE html>
<html>
<head>
    <!-- Add your other head elements here -->
    <style>
        /* Define the styles for the light and input fields */
        .light {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: red;
            display: inline-block;
            margin-left: 10px;
        }

        .active {
            background-color: green;
        }

        /* Style for input fields and dropdown */
        input, select {
            width: 60px; /* Adjust the width as needed */
        }
    </style>
</head>
<body>
    <!-- Your existing HTML content -->

    <button id="cone-button" onclick="toggleConeMode()">Cone Mode</button>
    <span class="light" id="cone-light"></span>

    <div>
        <label for="cone-number">Select Cone Number:</label>
        <select id="cone-number">
            <option value="10">Cone 10</option>
            <option value="6">Cone 6</option>
            <option value="04">Cone 04</option>
            <option value="018">Cone 018</option>
            <!-- Add more options as needed -->
        </select>
        <button onclick="updateConeNumber()">Update</button>
    </div>

<!-- Cone Mode Controls -->
<div>
    <label for="coneNumberSelect">Select Cone Number:</label>
    <select id="coneNumberSelect">
        <option value="1">Cone 1</option>
        <option value="2">Cone 2</option>
        <option value="3">Cone 3</option>
        <!-- Add more options as needed -->
    </select>
    <button id="setConeButton">Set Cone</button>
</div>

</body>
</html>

<!-- Cone Mode Controls -->
<div>
    <label for="coneNumberSelect">Select Cone Number:</label>
    <select id="coneNumberSelect">
        <option value="1">Cone 1</option>
        <option value="2">Cone 2</option>
        <option value="3">Cone 3</option>
        <!-- Add more options as needed -->
    </select>
    <button id="setConeButton">Set Cone</button>
</div>

</body>
</html>
